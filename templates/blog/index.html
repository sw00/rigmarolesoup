<%inherit file="layout.html"/>
<%block name="javascript">
	data = ${posts_json};

	data = _.map(data, function(p){
			return jQuery.parseJSON(p);
		});

	Entry = Backbone.Model.extend({
		initiliaze: console.log('loaded!')
	});

	Entries = Backbone.Collection.extend({
		model: Entry
	});

	entryObj = new Entry(data);	
</%block>

<%include file="header.html"/>

<div class="row" >
	<div class="span6 offset2"> 
	% for p in posts:
		<article>
		<header> 
		<div class="title"><a href="/blog/p/${p.key.urlsafe()}">${p.title}</a></div>
		<p><strong>${p.timestamp.strftime('%d %B %Y')}</strong></p>
		</header>
		<div class="content">
			${p.content}
			</div>
			<footer>
			<hr/>
			</footer>
	</article>
	% endfor
</div>
<div class="span3 offset1" id="aside">
	<form id="search" action="search" method="POST">
		<input type="search" placeholder="search..."></input>
	</form>
</div>
</div>

<%include file="footer.html"/>
